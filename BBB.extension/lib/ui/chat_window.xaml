<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="BBB Standards Assistant" 
        Height="700" Width="500"
        MinHeight="500" MinWidth="400"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5"
        Topmost="True">
    
    <Window.Resources>
        <!-- Styles -->
        <Style x:Key="MessageBubbleUser" TargetType="Border">
            <Setter Property="Background" Value="#0078D4"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="50,5,10,5"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
        </Style>
        
        <Style x:Key="MessageBubbleAssistant" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="10,5,50,5"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>  <!-- Header -->
            <RowDefinition Height="*"/>     <!-- Messages -->
            <RowDefinition Height="Auto"/>  <!-- Input -->
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="#2A7DE1" Padding="15,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Icon -->
                <Image x:Name="HeaderIcon" 
                       Grid.Column="0"
                       Width="32" 
                       Height="32"
                       Margin="0,0,12,0"
                       VerticalAlignment="Center"/>
                
                <!-- Title and Status -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock Text="BBB Standards Assistant" 
                              FontSize="18" 
                              FontWeight="Bold" 
                              Foreground="White"/>
                    <TextBlock x:Name="StatusText" 
                              Text="Ready" 
                              FontSize="11" 
                              Foreground="#E0E0E0"
                              Margin="0,3,0,0"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Messages Area -->
        <ScrollViewer Grid.Row="1" 
                     x:Name="MessageScrollViewer"
                     VerticalScrollBarVisibility="Auto"
                     Padding="10">
            <StackPanel x:Name="MessagesPanel">
                <!-- Welcome message -->
                <Border Style="{StaticResource MessageBubbleAssistant}">
                    <TextBlock TextWrapping="Wrap" Foreground="#333">
                        <Run Text="Hi! I'm here to help you with BBB's Revit standards."/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="Ask me anything about BBB's Revit standards and I'll point you to the right information:"/>
                    </TextBlock>
                </Border>
            </StackPanel>
        </ScrollViewer>
        
        <!-- Input Area -->
        <Border Grid.Row="2" 
                Background="White" 
                BorderBrush="#E0E0E0" 
                BorderThickness="0,1,0,0"
                Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBox x:Name="InputTextBox" 
                        Grid.Column="0"
                        TextWrapping="Wrap"
                        MaxHeight="100"
                        VerticalScrollBarVisibility="Auto"
                        Padding="10"
                        FontSize="13"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"/>
                
                <Button x:Name="SendButton" 
                       Grid.Column="1"
                       Content="Send"
                       Width="80"
                       Height="36"
                       Margin="10,0,0,0"
                       Background="#2A7DE1"
                       Foreground="White"
                       FontWeight="Bold"
                       BorderThickness="0"
                       Cursor="Hand"/>
            </Grid>
        </Border>
        
        <!-- Loading Overlay -->
        <Grid x:Name="LoadingOverlay" 
              Grid.RowSpan="3" 
              Background="#90000000" 
              Visibility="Collapsed">
            <Border Background="White" 
                   Padding="30,25" 
                   CornerRadius="12"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   BorderBrush="#2A7DE1"
                   BorderThickness="2">
                <StackPanel Width="280">
                    <!-- Spinning Circle -->
                    <Grid Height="50" Margin="0,0,0,15">
                        <Ellipse x:Name="LoadingSpinner"
                                Width="40" 
                                Height="40"
                                Stroke="#2A7DE1"
                                StrokeThickness="4"
                                StrokeDashArray="25 75"
                                RenderTransformOrigin="0.5,0.5">
                            <Ellipse.RenderTransform>
                                <RotateTransform x:Name="SpinnerRotation" Angle="0"/>
                            </Ellipse.RenderTransform>
                        </Ellipse>
                    </Grid>
                    
                    <TextBlock Text="Working on it..." 
                              FontSize="18" 
                              FontWeight="SemiBold"
                              HorizontalAlignment="Center"
                              Foreground="#2A7DE1"/>
                    <TextBlock x:Name="LoadingStatusText" 
                              Text="Searching standards database..." 
                              FontSize="13" 
                              Foreground="#666"
                              Margin="0,12,0,0"
                              TextWrapping="Wrap"
                              TextAlignment="Center"
                              HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
